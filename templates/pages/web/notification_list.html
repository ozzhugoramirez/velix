{% extends "pages/web/base.html" %}

{% block navbar %}
  {% include "components/web/navbar.html" %}
{% endblock navbar %}

{% block content %}


<style>
    .timeline-item {
  position: relative;
  padding-left: 1.5rem;
  border-left: 3px solid #0d6efd;
}

.timeline-item::before {
  content: '';
  position: absolute;
  top: 18px;
  left: -9px;
  width: 16px;
  height: 16px;
  background: #0d6efd;
  border-radius: 50%;
  border: 3px solid #fff;
  box-shadow: 0 0 0 2px #0d6efd;
}

</style>




<section class="bg-light py-5 mt-5">
  <div class="container">
    <!-- Encabezado -->
    <div class="mb-5 text-center">
        <div class="d-inline-flex align-items-center gap-3">
            <div class="bg-primary bg-opacity-25 rounded-circle p-3">
            <i class="bi bi-bell-fill text-primary fs-3"></i>
            </div>
            <div class="text-start">
            <h2 class="fw-bold mb-1">Tus Notificaciones</h2>
            <p class="text-muted mb-0">Mantente informado con los últimos avisos y mensajes importantes.</p>
            </div>
        </div>
        </div>


    <!-- Lista de notificaciones -->
    <div class="timeline">
      {% for item in notification_data %}
        <div class="timeline-item mb-4">
          <div class="card shadow-sm border-0 rounded-4 
            {% if item.is_read %}
              bg-white
            {% else %}
              bg-primary bg-opacity-10
            {% endif %}">
            <div class="card-body d-flex justify-content-between align-items-start flex-wrap p-4">
              
              <!-- Ícono -->
              <div class="me-3">
                {% if item.is_read %}
                  <i class="bi bi-envelope-open fs-4 text-secondary"></i>
                {% else %}
                  <i class="bi bi-envelope fs-4 text-primary"></i>
                {% endif %}
              </div>

              <!-- Contenido de notificación -->
              <div class="flex-grow-1">
                <h5 class="fw-semibold mb-1">{{ item.notification.title }}</h5>
                <p class="mb-2 text-muted small">{{ item.notification.message }}</p>
                <div class="d-flex flex-wrap align-items-center gap-3">
                  <span class="badge 
                    {% if item.is_read %}bg-secondary{% else %}bg-danger{% endif %}">
                    {% if item.is_read %}Leído{% else %}No leído{% endif %}
                  </span>
                  <small class="text-muted">
                    <i class="bi bi-clock me-1"></i>
                    {{ item.notification.created_at|date:"d M Y, H:i" }}
                  </small>
                </div>
              </div>

              <!-- Acción -->
              <div class="mt-3 mt-md-0">
                <a href="{% url 'notification_detail' item.notification.id %}" class="btn btn-outline-primary btn-sm rounded-pill">
                  Ver más <i class="bi bi-chevron-right ms-1"></i>
                </a>
              </div>

            </div>
          </div>
        </div>
      {% empty %}
        <div class="text-center py-5 text-muted">
          <i class="bi bi-inbox-fill fs-1 mb-3"></i>
          <p class="mb-0">No tienes notificaciones por ahora.</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
